@model MVC02.Models.Article

@{
    ViewBag.Title = "ArticleRemove";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Main{
    <h2>ArticleRemove</h2>

    <h3>Are you sure you want to delete this?</h3>
    <div>
        <h4>Article</h4>
        <hr />
        <dl class="dl-horizontal">
            <dt>@Html.DisplayNameFor(m => m.artTitle)</dt>
            <dd>@Html.DisplayFor(m => m.artTitle)</dd>

            <dt>@Html.DisplayNameFor(m => m.artText)</dt>
            <dd>@Html.DisplayFor(m => m.artText)</dd>

            <dt>@Html.DisplayNameFor(m => m.artPublishDate)</dt>
            <dd>@Html.DisplayFor(m => m.artPublishDate)</dd>

            <dt>@Html.DisplayNameFor(m => m.artUpdateDate)</dt>
            <dd>@Html.DisplayFor(m => m.artUpdateDate)</dd>

            <dt>@Html.DisplayNameFor(m => m.artImage)</dt>
            <dd>@Html.DisplayFor(m => m.artImage)</dd>

            <dt>@Html.DisplayNameFor(m => m.artActive)</dt>
            <dd>@Html.DisplayFor(m => m.artActive)</dd>

            <dt>@Html.DisplayNameFor(m => m.Account.usrFullName)</dt>
            <dd>@Html.DisplayFor(m => m.Account.usrFullName)</dd>
        </dl>

        @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "remForm", name = "remForm" })) {
            @Html.AntiForgeryToken()

            <div class="form-actions no-color">
                @Html.HiddenFor(m => m.artID)
                <input type="submit" value="Remove" class="btn btn-default" /> |
                @Html.ActionLink("Back to List", "Article/Index")
            </div>
        }
    </div>
}

@section Source{
    <script>
        $(document).ready(function () {
            $("#remForm").submit(function (e) {
                e.preventDefault();

                $.ajax({
                    url: "/Admin/ArtRemove",
                    method: "POST",
                    data: new FormData(this),
                    contentType: false,
                    cache: false,
                    processData: false,
                    success: function (isdone) {
                        if (isdone == "True") {
                            alert("Update Complete");
                            window.location.replace("/Admin/Article");
                        } else {
                            alert("Problem.");
                        }
                    },
                    error: function () {
                        alert("Error");
                    }
                });
            });
        });
    </script>
}